<!DOCTYPE html>
<html lang="en">
  {% load static %}
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>GPA Improvement Advisor</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* All styles integrated in one file */
    :root {
      /* Color variables */
      --primary: #d5bdaf;
      --primary-light: #e8d7c6;
      --secondary: #c3a995;
      --light: #f5ebe0;
      --accent: #c3a995;
      --dark: #4a3f35;
      --light-gray: #edede9;
      --white: #ffffff;
      --danger: #e74c3c;
      --success: #5CBA60;
      --warning: #f39c12;
      
      /* Original color variables */
      --color-isabelline: #F7F7F5;
      --color-khaki: #D6C5B8;
      --color-linen: #FAF5EF;
      --color-champagne: #EFE5DE;
      --color-dogwood: #E5D5CC;
      --color-text: #444444;
      --color-text-secondary: #666666;
      --color-success: #5CBA60;
      --color-heading: #333333;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--light);
      color: var(--dark);
      display: flex;
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Sidebar Styles */
    .sidebar {
      width: 250px;
      background: var(--primary);
      color: var(--white);
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
      transition: all 0.3s ease;
    }

    .sidebar-header {
      padding: 1.5rem;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      position: relative;
    }

    .sidebar-header h2 {
      margin: 0;
      font-weight: 300;
      letter-spacing: 1px;
      color: var(--white);
    }

    .sidebar-menu {
      list-style: none;
      padding: 1rem 0;
    }

    .sidebar-menu li {
      margin-bottom: 0.5rem;
    }

    .sidebar-menu a {
      display: block;
      padding: 0.75rem 1.5rem;
      color: var(--white);
      text-decoration: none;
      transition: all 0.3s;
      border-left: 3px solid transparent;
      font-size: 0.95rem;
    }

    .sidebar-menu a:hover, 
    .sidebar-menu a.active {
      background: var(--primary-light);
      border-left-color: var(--accent);
    }

    .sidebar-menu a i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }

    /* Main Content Styles */
    .content-wrapper {
      flex: 1;
      margin-left: 250px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      background: var(--light);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .page-title {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--dark);
      background-color: var(--primary-light);
      padding: 1.2rem;
      margin-bottom: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-bottom: 2px dashed var(--secondary);
    }
    
    header {
      background-color: var(--primary);
      padding: 18px 0;
      box-shadow: 0 3px 6px rgba(0,0,0,0.08);
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
    }

    .logo img {
      width: 50px;
      height: 50px;
      margin-right: 15px;
    }
    
    .user-profile {
      background-color: #e5e5e5;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .user-profile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
      transition: opacity 0.2s ease;
    }
    
    .user-profile img:hover {
      opacity: 0.7;
    }
    
    main {
      padding: 30px 0;
    }

    /* Cards */
    .card {
      background-color: var(--color-linen);
      padding: 24px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.04);
      margin-bottom: 24px;
    }

    .card-header {
      margin-bottom: 16px;
      position: relative;
    }

    .card-title {
      font-size: 1.4rem;
      color: var(--color-heading);
      letter-spacing: 0.02em;
      font-weight: 600;
      border-bottom: 1px solid var(--color-champagne);
      padding-bottom: 8px;
    }
    
    /* Analysis Grid */
    .analysis-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 24px;
    }
    
    /* GPA Overview */
    .gpa-overview {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 16px;
    }
    
    .gpa-box {
      background-color: white;
      padding: 18px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.03);
      transition: transform 0.2s ease;
    }
    
    .gpa-box:hover {
      transform: translateY(-2px);
    }
    
    .gpa-label {
      font-size: 0.85rem;
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .gpa-value {
      font-size: 1.3rem;
      font-weight: 600;
      margin-top: 8px;
      color: var(--color-heading);
    }
    
    /* Performance Chart */
    .performance-chart {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.03);
      margin-top: 16px;
    }
    .smaller-chart {
      max-height: 250px;
      width: 90%;
      margin: 0 auto;
    }
    
    /* Adjust the chart canvas to fit the container */
    .smaller-chart canvas {
      max-height: 200px;
      width: 100% !important;
      height: auto !important;
    }
    
    /* Course Performance Table */
    .course-table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .course-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }
    
    .course-table th {
      background-color: var(--color-champagne);
      padding: 14px 18px;
      text-align: left;
      font-weight: 600;
      color: var(--color-heading);
      letter-spacing: 0.02em;
      font-size: 0.95rem;
    }
    
    .course-table td {
      padding: 14px 18px;
      border-bottom: 1px solid #f0f0f0;
      font-size: 0.95rem;
    }
    
    .course-table tr:nth-child(even) {
      background-color: rgba(239, 229, 222, 0.2);
    }
    
    .course-table tr:hover {
      background-color: rgba(239, 229, 222, 0.35);
    }
    
    /* Performance indicators */
    .performance-indicator {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;
    }
    
    .performance-good {
      background-color: var(--color-success);
    }
    
    .performance-average {
      background-color: var(--warning);
    }
    
    .performance-poor {
      background-color: var(--danger);
    }
    
    /* AI Advisor Section */
    .advisor-section {
      margin-bottom: 24px;
    }
    
    .advisor-container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    
    .advisor-avatar {
      flex: 0 0 80px;
      height: 80px;
      border-radius: 50%;
      background-color: var(--secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
    }
    
    .advisor-content {
      flex: 1;
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      position: relative;
    }
    
    .advisor-content::before {
      content: '';
      position: absolute;
      top: 20px;
      left: -10px;
      width: 0;
      height: 0;
      border-top: 10px solid transparent;
      border-bottom: 10px solid transparent;
      border-right: 10px solid white;
    }
    
    .advisor-greeting {
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--color-heading);
    }
    
    .advisor-messages {
      margin-bottom: 16px;
    }
    
    .advisor-message {
      margin-bottom: 12px;
      line-height: 1.6;
    }
    
    .advisor-message p {
      margin-bottom: 8px;
    }
    
    .advisor-message ul {
      margin-left: 24px;
      margin-bottom: 8px;
    }
    
    .advisor-message li {
      margin-bottom: 4px;
    }
    
    /* Strategy Cards */
    .strategies-section {
      margin-bottom: 24px;
    }
    
    .strategy-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .strategy-card {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: transform 0.2s ease;
    }
    
    .strategy-card:hover {
      transform: translateY(-5px);
    }
    
    .strategy-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: var(--primary-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      color: var(--color-heading);
      margin-bottom: 16px;
    }
    
    .strategy-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--color-heading);
    }
    
    .strategy-description {
      color: var(--color-text);
      font-size: 0.95rem;
      margin-bottom: 16px;
    }
    
    .strategy-actions {
      font-size: 0.9rem;
    }
    
    .strategy-actions p {
      margin-bottom: 8px;
    }
    
    /* Action Plan Section */
    .action-plan-section {
      margin-bottom: 24px;
    }
    
    .action-plan-list {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .action-item {
      padding: 16px;
      border-bottom: 1px solid var(--light-gray);
      display: flex;
      align-items: flex-start;
    }
    
    .action-item:last-child {
      border-bottom: none;
    }
    
    .action-checkbox {
      margin-right: 16px;
      margin-top: 4px;
    }
    
    .action-checkbox input {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    .action-content {
      flex: 1;
    }
    
    .action-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--color-heading);
    }
    
    .action-description {
      font-size: 0.9rem;
      color: var(--color-text);
    }
    
    .action-deadline {
      font-size: 0.8rem;
      color: var(--color-text-secondary);
      margin-top: 8px;
    }
    
    /* Resources Section */
    .resources-section {
      margin-bottom: 24px;
    }
    
    .resource-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }
    
    .resource-card {
      background-color: white;
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: transform 0.2s ease;
    }
    
    .resource-card:hover {
      transform: translateY(-3px);
    }
    
    .resource-icon {
      font-size: 1.2rem;
      color: var(--primary);
      margin-bottom: 8px;
    }
    
    .resource-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--color-heading);
    }
    
    .resource-description {
      font-size: 0.9rem;
      color: var(--color-text);
      margin-bottom: 12px;
    }
    
    .resource-link {
      display: inline-block;
      color: var(--primary);
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
      transition: color 0.2s;
    }
    
    .resource-link:hover {
      color: var(--secondary);
    }
    
    /* Query Form */
    .query-form {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      margin-top: 20px;
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--color-heading);
    }
    
    .form-control {
      width: 100%;
      padding: 10px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(213, 189, 175, 0.2);
    }
    
    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }
    
    .btn {
      display: inline-block;
      background-color: var(--primary);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn:hover {
      background-color: var(--secondary);
    }
    
    /* Menu Toggle */
    .menu-toggle {
      display: none;
      background: var(--primary);
      color: var(--white);
      border: none;
      padding: 0.5rem;
      font-size: 1.5rem;
      cursor: pointer;
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 20;
      border-radius: 4px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    /* Sidebar close button */
    .sidebar-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: transparent;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      display: none;
    }

    /* Overlay */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.4);
      z-index: 5;
      display: none;
      backdrop-filter: blur(2px);
    }

    .sidebar-overlay.active {
      display: block;
    }

    /* Enhanced Mobile Responsive Styles */
    @media (max-width: 992px) {
      .sidebar {
        width: 220px;
      }
      .content-wrapper {
        margin-left: 220px;
      }
      .sidebar-menu a {
        padding: 0.6rem 1rem;
      }
      .container {
        padding: 0 15px;
      }
      .analysis-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 250px;
        height: 100vh;
        position: fixed;
        top: 0;
        left: -250px; /* Hide off-screen by default */
        z-index: 100;
        transition: left 0.3s ease;
        overflow-y: auto;
      }
      .sidebar.active {
        left: 0; /* Show when active */
        box-shadow: 3px 0 15px rgba(0,0,0,0.2);
      }
      .content-wrapper {
        margin-left: 0;
        width: 100%;
        padding: 70px 1rem 1rem;
      }
      .menu-toggle {
        display: block;
      }
      .gpa-overview {
        grid-template-columns: 1fr 1fr;
      }
      .strategy-cards, .resource-cards {
        grid-template-columns: 1fr;
      }
      .advisor-container {
        flex-direction: column;
        align-items: center;
      }
      .advisor-content::before {
        display: none;
      }
      .card {
        padding: 15px;
      }
      .page-title {
        font-size: 1.5rem;
        padding: 1rem;
      }
      .smaller-chart {
        width: 100%;
      }
      .form-control {
        padding: 12px;
        min-height: 44px; /* Better tap targets */
      }
      .btn {
        width: 100%;
        padding: 12px;
        min-height: 44px;
      }
    }

    @media (max-width: 576px) {
      .container {
        padding: 0 10px;
      }
      .page-title {
        font-size: 1.3rem;
        padding: 0.8rem;
      }
      .gpa-overview {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      .card-title {
        font-size: 1.2rem;
      }
      .action-item {
        flex-direction: column;
      }
      .action-checkbox {
        margin-right: 0;
        margin-bottom: 10px;
      }
      .advisor-avatar {
        margin-bottom: 15px;
      }
      
      /* Enhanced table display for small screens */
      .course-table {
        min-width: auto;
      }
      
      .mobile-responsive-table td, 
      .mobile-responsive-table th {
        display: block;
        text-align: left;
        padding: 0.5rem;
      }
      
      .mobile-responsive-table td {
        position: relative;
        padding-left: 40%;
        border-bottom: none;
      }
      
      .mobile-responsive-table td::before {
        content: attr(data-label);
        position: absolute;
        left: 0.5rem;
        top: 0.5rem;
        width: 35%;
        font-weight: bold;
      }
      
      .mobile-responsive-table tr {
        border-bottom: 2px solid var(--light-gray);
        margin-bottom: 0.5rem;
      }
      
      .mobile-responsive-table thead {
        display: none;
      }
      
      /* Make strategy cards more compact */
      .strategy-card {
        padding: 15px;
      }
      
      .strategy-icon {
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
        margin-bottom: 10px;
      }
      
      /* Improve spacing and readability */
      .card {
        margin-bottom: 15px;
      }
      
      .performance-chart {
        padding: 10px;
      }
      
      /* Make forms more touch-friendly */
      select, input, textarea, .btn {
        font-size: 16px; /* Prevents zoom on iOS */
      }
    }
    /* Enhanced AI Academic Advisor Section */
.advisor-section {
  margin-bottom: 32px;
}

.advisor-container {
  display: flex;
  gap: 24px;
  margin-top: 24px;
}

/* Improved advisor avatar */
.advisor-avatar {
  flex: 0 0 90px;
  height: 90px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.2rem;
  color: white;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border: 3px solid var(--white);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.advisor-avatar:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

/* Enhanced advisor content area */
.advisor-content {
  flex: 1;
  background: linear-gradient(to bottom, white, rgba(245, 235, 224, 0.2));
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  position: relative;
  border: 1px solid rgba(213, 189, 175, 0.3);
}

/* Improved speech bubble pointer */
.advisor-content::before {
  content: '';
  position: absolute;
  top: 30px;
  left: -12px;
  width: 0;
  height: 0;
  border-top: 12px solid transparent;
  border-bottom: 12px solid transparent;
  border-right: 12px solid white;
  filter: drop-shadow(-3px 2px 2px rgba(0,0,0,0.05));
}

/* Enhanced greeting */
.advisor-greeting {
  font-weight: 600;
  margin-bottom: 16px;
  color: var(--color-heading);
  font-size: 1.3rem;
  border-bottom: 2px dashed var(--primary-light);
  padding-bottom: 10px;
  position: relative;
}

/* Adding a decoration to the greeting */
.advisor-greeting::after {
  content: "🤖";
  position: absolute;
  right: 10px;
  top: 0;
  font-size: 1.4rem;
}

/* Improved message content */
.advisor-messages {
  margin-bottom: 18px;
  line-height: 1.7;
}

.advisor-message {
  margin-bottom: 18px;
}

.advisor-message p {
  margin-bottom: 12px;
}

.advisor-message p strong {
  color: var(--dark);
  background-color: rgba(213, 189, 175, 0.2);
  padding: 2px 5px;
  border-radius: 4px;
}

.advisor-message ul {
  margin-left: 24px;
  margin-bottom: 15px;
  list-style-type: none;
}

.advisor-message li {
  margin-bottom: 8px;
  position: relative;
  padding-left: 20px;
}

.advisor-message li::before {
  content: "✓";
  position: absolute;
  left: 0;
  color: var(--primary);
  font-weight: bold;
}

.advisor-message li strong {
  color: var(--dark);
}

/* Highlight box for advice */
.advisor-highlight {
  background-color: rgba(195, 169, 149, 0.1);
  border-left: 4px solid var(--primary);
  padding: 15px;
  margin: 18px 0;
  border-radius: 0 8px 8px 0;
}

.advisor-highlight strong {
  color: var(--dark);
  font-weight: 600;
}

/* Action buttons */
.advisor-actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.advisor-btn {
  display: inline-block;
  background-color: var(--primary);
  color: white;
  padding: 10px 18px;
  border: none;
  border-radius: 6px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

.advisor-btn:hover {
  background-color: var(--secondary);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.advisor-btn-secondary {
  background-color: transparent;
  color: var(--dark);
  border: 1px solid var(--primary);
}

.advisor-btn-secondary:hover {
  background-color: var(--primary-light);
  color: var(--dark);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .advisor-container {
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }
  
  .advisor-content::before {
    display: none;
  }
  
  .advisor-avatar {
    margin-bottom: 0;
  }
  
  .advisor-actions {
    flex-direction: column;
  }
  
  .advisor-btn {
    width: 100%;
    justify-content: center;
  }
}

@media (max-width: 576px) {
  .advisor-greeting {
    font-size: 1.1rem;
    text-align: center;
  }
  
  .advisor-greeting::after {
    position: static;
    margin-left: 5px;
  }
  
  .advisor-content {
    padding: 18px;
  }
}

    /* Print styles */
    @media print {
      .sidebar, .menu-toggle, .sidebar-overlay, .sidebar-close {
        display: none;
      }
      
      .content-wrapper {
        margin-left: 0;
        padding: 0;
      }
      
      .card {
        break-inside: avoid;
        box-shadow: none;
        border: 1px solid #ddd;
      }
    }

    /* Chat Container Styling */
  .styled-chat-container {
    padding: 20px;
    max-height: 300px;
    overflow-y: auto;
    background-color: #f9f4ef;
    border-radius: 10px;
    border: 1px solid var(--primary-light);
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.03);
    margin-bottom: 15px;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) #f1f1f1;
  }
  
  /* Styling the scrollbar for WebKit browsers */
  .styled-chat-container::-webkit-scrollbar {
    width: 6px;
  }
  
  .styled-chat-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }
  
  .styled-chat-container::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 10px;
  }
  
  /* Message Styling */
  .chat-message {
    padding: 12px 16px;
    border-radius: 18px;
    margin-bottom: 12px;
    max-width: 85%;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    line-height: 1.5;
    position: relative;
    word-wrap: break-word;
  }
  
  /* Advisor Message Styling */
  .chat-message.advisor {
    background-color: white;
    border-top-left-radius: 4px;
    align-self: flex-start;
    margin-right: auto;
    border-left: 3px solid var(--primary);
  }
  
  /* Student Message Styling */
  .chat-message.student {
    background-color: var(--primary-light);
    border-top-right-radius: 4px;
    align-self: flex-end;
    margin-left: auto;
    text-align: right;
    border-right: 3px solid var(--secondary);
  }
  
  /* Chat Input Wrapper */
  .styled-chat-input-wrapper {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    padding: 0 5px;
  }
  
  /* Chat Input Field */
  .styled-chat-input {
    flex: 1;
    padding: 12px 18px;
    border: 2px solid var(--primary-light);
    border-radius: 25px;
    font-size: 0.95rem;
    background-color: white;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.02);
  }
  
  .styled-chat-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(213, 189, 175, 0.2);
  }
  
  /* Send Button */
  .styled-chat-btn {
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    color: white;
    border: none;
    padding: 0 25px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .styled-chat-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
  }
  
  .styled-chat-btn:active {
    transform: translateY(1px);
  }
  
  /* Responsive Adjustments */
  @media (max-width: 576px) {
    .chat-message {
      max-width: 90%;
    }
    
    .styled-chat-input {
      padding: 10px 15px;
    }
    
    .styled-chat-btn {
      padding: 0 20px;
      font-size: 0.9rem;
    }
  }
  </style>
</head>
<body>
  <!-- Mobile Menu Toggle -->
  <button class="menu-toggle" id="menuToggle">
    <i class="fas fa-bars"></i>
  </button>
  
  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="overlay"></div>
  
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>Academic Portal</h2>
      <button class="sidebar-close" id="closeSidebar">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <ul class="sidebar-menu">
      <li><a href="{% url 'home' %}"><i class="fas fa-home"></i> Dashboard</a></li>
      <li><a href="{% url 'gpa_calculator' %}"><i class="fas fa-calculator"></i> GPA Calculator</a></li>
      <li><a href="{% url 'gpa_improvement' %}" class="active"><i class="fas fa-chart-line"></i> GPA Improvement</a></li>
      <li><a href="{% url 'schedule_suggestions' %}"><i class="fas fa-calendar-alt"></i> Course Schedule</a></li>
    </ul>
  </div>
  
  <!-- Main Content -->
  <div class="content-wrapper">
    <main class="container">
      <h1 class="page-title">GPA Improvement Advisor</h1>
      
      <!-- Performance Analysis Section -->
      <div class="analysis-grid">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Current GPA Status</h2>
          </div>
          
          <div class="gpa-overview">
            <div class="gpa-box">
              <div class="gpa-label">Current CGPA</div>
              <div class="gpa-value">{{ student.CGPA }}</div>
            </div>
            <div class="gpa-box">
              <div class="gpa-label">Current MCGPA</div>
              <div class="gpa-value">{{ student.MCGPA }}</div>
            </div>
            <div class="gpa-box">
              <div class="gpa-label">Target CGPA</div>
              <div class="gpa-value">{{ target_cgpa }}</div>
            </div>
            <div class="gpa-box">
              <div class="gpa-label">Credits Completed</div>
              <div class="gpa-value">{{ completed_credits }}</div>
            </div>
          </div>
          
          <div class="performance-chart smaller-chart">
            <h3 style="margin-bottom: 12px; font-size: 1rem;">GPA Trend</h3>
            <canvas id="gpaChart" width="400" height="200"></canvas>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Course Performance</h2>
          </div>
          
          <div class="course-table-container">
            <table class="course-table mobile-responsive-table">
              <thead>
                <tr>
                  <th>Course</th>
                  <th>Credits</th>
                  <th>Grade</th>
                  <th>Performance</th>
                </tr>
              </thead>
              <tbody>
                {% for course in student_courses %}
                <tr>
                  <td data-label="Course">{{ course.course_code }} - {{ course.course_name }}</td>
                  <td data-label="Credits">{{ course.credits }}</td>
                  <td data-label="Grade">{{ course.grade }}</td>
                  <td data-label="Performance">
                    {% if course.grade_value >= 3.33 %}
                      <span class="performance-indicator performance-good">Good</span>
                    {% elif course.grade_value >= 2.0 %}
                      <span class="performance-indicator performance-average">Average</span>
                    {% else %}
                      <span class="performance-indicator performance-poor">Poor</span>
                    {% endif %}
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="4">No course data available.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- AI Advisor Section -->
      <div class="advisor-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">AI Academic Advisor</h2>
          </div>
          
          <div class="advisor-container">
            <div class="advisor-avatar">
              <i class="fas fa-robot"></i>
            </div>
            <div class="advisor-content">
              <div class="advisor-greeting">Hello, {{ student.student_name }}!</div>
              <div class="advisor-messages">
                <div class="advisor-message">
                  <p>To reach your target CGPA of <strong>{{ target_cgpa }}</strong>, you need to perform well in your current courses this semester.</p>
      
                  <p>Here's what you need to achieve in each course:</p>
                  <ul>
                    {% for enrollment in current_courses %}
                      <li><strong>{{ enrollment.course_id }} - {{ enrollment.course_name }}:</strong> At least a <strong>{{ enrollment.min_grade }}</strong> grade is needed.</li>
                    {% endfor %}
                  </ul>
                  
                  <div class="advisor-highlight">
                    {% if average_gpa_needed >= 3.5 %}
                      <p><strong>Advice:</strong> You need a very high performance this semester (average GPA {{ average_gpa_needed|floatformat:2 }}). Focus intensely on all subjects. Consider reducing distractions, attending all office hours, and possibly getting tutoring.</p>
                    {% elif average_gpa_needed >= 3.0 %}
                      <p><strong>Advice:</strong> You're expected to aim for mostly A and B grades (average GPA {{ average_gpa_needed|floatformat:2 }}). Stay consistent and put extra effort into weaker areas.</p>
                    {% elif average_gpa_needed >= 2.5 %}
                      <p><strong>Advice:</strong> A good performance will get you there (average GPA {{ average_gpa_needed|floatformat:2 }}). Focus on improving in subjects you struggled with before.</p>
                    {% else %}
                      <p><strong>Advice:</strong> Your target is within easy reach (average GPA {{ average_gpa_needed|floatformat:2 }}). Maintain steady performance and avoid failing grades.</p>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div class="advisor-actions">
                
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Improvement Strategies Section -->
      <div class="strategies-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Personalized Improvement Strategies</h2>
          </div>
          
          <div class="strategy-cards">
            <div class="strategy-card">
              <div class="strategy-icon">
                <i class="fas fa-book"></i>
              </div>
              <h3 class="strategy-title">Study Techniques</h3>
              <div class="strategy-description">
                Optimize your study methods based on your learning style and course requirements.
              </div>
              <div class="strategy-actions">
                <p><strong>Actions:</strong></p>
                <ul>
                  <li>Try the Pomodoro technique (25 min study, 5 min break)</li>
                  <li>Create concept maps for complex topics</li>
                  <li>Use spaced repetition for better retention</li>
                </ul>
              </div>
            </div>
            
            <div class="strategy-card">
              <div class="strategy-icon">
                <i class="fas fa-clock"></i>
              </div>
              <h3 class="strategy-title">Time Management</h3>
              <div class="strategy-description">
                Create a balanced schedule that prioritizes academic work while allowing for breaks.
              </div>
              <div class="strategy-actions">
                <p><strong>Actions:</strong></p>
                <ul>
                  <li>Create a weekly schedule with dedicated study blocks</li>
                  <li>Set specific goals for each study session</li>
                  <li>Use digital tools to track assignments and deadlines</li>
                </ul>
              </div>
            </div>
            
            <div class="strategy-card">
              <div class="strategy-icon">
                <i class="fas fa-users"></i>
              </div>
              <h3 class="strategy-title">Peer Learning</h3>
              <div class="strategy-description">
                Leverage collaborative learning to enhance understanding and motivation.
              </div>
              <div class="strategy-actions">
                <p><strong>Actions:</strong></p>
                <ul>
                  <li>Form study groups for challenging courses</li>
                  <li>Teach concepts to others to reinforce understanding</li>
                  <li>Share and compare notes with classmates</li>
                </ul>
              </div>
            </div>
            
            <div class="strategy-card">
              <div class="strategy-icon">
                <i class="fas fa-graduation-cap"></i>
              </div>
              <h3 class="strategy-title">Course Selection</h3>
              <div class="strategy-description">
                Strategic course selection can help balance your workload and optimize GPA.
              </div>
              <div class="strategy-actions">
                <p><strong>Actions:</strong></p>
                <ul>
                  <li>Balance difficult courses with easier ones each semester</li>
                  <li>Consider professors' teaching styles and grading patterns</li>
                  <li>Take prerequisites early to build foundational knowledge</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Action Plan Section -->
      <div class="action-plan-section">
        <div class="card">
          
          
          <div class="action-plan-list">
            {% for action in action_plan %}
            <div class="action-item">
              <div class="action-checkbox">
                <input type="checkbox" id="action{{ forloop.counter }}">
              </div>
              <div class="action-content">
                <div class="action-title">{{ action.title }}</div>
                <div class="action-description">{{ action.description }}</div>
                <div class="action-deadline">Deadline: {{ action.deadline }}</div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      
      <!-- Resources Section -->
      <div class="resources-section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Helpful Resources</h2>
          </div>
          
          <div class="resource-cards">
            <div class="resource-card">
              <div class="resource-icon">
                <i class="fas fa-chalkboard-teacher"></i>
              </div>
              <h3 class="resource-title">Academic Success Center</h3>
              <div class="resource-description">
                Get personalized tutoring, workshops, and academic coaching to improve your performance.
              </div>
            </div>
            
            <div class="resource-card">
              <div class="resource-icon">
                <i class="fas fa-brain"></i>
              </div>
              <h3 class="resource-title">Study Skills Workshops</h3>
              <div class="resource-description">
                Attend workshops on note-taking, test preparation, time management, and more.
              </div>
            </div>
            
            <div class="resource-card">
              <div class="resource-icon">
                <i class="fas fa-laptop"></i>
              </div>
              <h3 class="resource-title">Online Learning Tools</h3>
              <div class="resource-description">
                Access online resources like practice quizzes, video tutorials, and interactive learning modules.
              </div>
            </div>
            
            <div class="resource-card">
              <div class="resource-icon">
                <i class="fas fa-user-tie"></i>
              </div>
              <h3 class="resource-title">Faculty Office Hours</h3>
              <div class="resource-description">
                Meet with your professors during office hours to get clarification and additional help.
              
          </div>
        </div>
      </div>
      
      <!-- Ask AI Advisor Form -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Chat with Your AI Advisor</h2>
        </div>
        
        <!-- Chat Messages - Keeping the original structure but adding styling -->
        <div id="chatContainer" class="styled-chat-container">
          <div class="chat-message advisor">👩‍🏫 Hello {{ student.student_name }}, I'm your AI advisor. Ask me about your GPA, performance, or strategies!</div>
        </div>
        
        <!-- Chat Input - Keeping the original structure but adding styling -->
        <div class="styled-chat-input-wrapper">
          <input type="text" id="chatInput" class="styled-chat-input" placeholder="Ask me a question...">
          <button class="styled-chat-btn" id="sendMessage">Send</button>
        </div>
      </div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Sidebar Menu Toggle
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const closeSidebar = document.getElementById('closeSidebar');
    
    menuToggle.addEventListener('click', function() {
      sidebar.classList.add('active');
      overlay.classList.add('active');
      closeSidebar.style.display = 'block';
    });
    
    function closeSidebarMenu() {
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
      closeSidebar.style.display = 'none';
    }
    
    closeSidebar.addEventListener('click', closeSidebarMenu);
    overlay.addEventListener('click', closeSidebarMenu);
    
    // GPA Chart
    document.addEventListener('DOMContentLoaded', function() {
      const ctx = document.getElementById('gpaChart').getContext('2d');
      
      // Parse semester data from Django template
      const semesters = JSON.parse('{{ semesters|default:"[]"|escapejs }}');
      const cgpaHistory = JSON.parse('{{ cgpa_history|default:"[]"|escapejs }}');
      
      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: semesters,
          datasets: [{
            label: 'CGPA Trend',
            data: cgpaHistory,
            backgroundColor: 'rgba(213, 189, 175, 0.2)',
            borderColor: '#c3a995',
            borderWidth: 2,
            tension: 0.3,
            pointBackgroundColor: '#d5bdaf',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: false,
              min: 0,
              max: 4,
              ticks: {
                stepSize: 0.5
              }
            }
          },
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              backgroundColor: '#4a3f35',
              titleFont: {
                size: 14
              },
              bodyFont: {
                size: 13
              },
              padding: 12
            }
          }
        }
      });
      
      // Make chart responsive
      function resizeChart() {
        if (window.innerWidth < 576) {
          chart.options.scales.y.ticks.display = false;
        } else {
          chart.options.scales.y.ticks.display = true;
        }
        chart.update();
      }
      
      // Call on load and resize
      resizeChart();
      window.addEventListener('resize', resizeChart);
    });
    
    // AI Advisor Form
    document.getElementById('submitQuery').addEventListener('click', function() {
      const queryType = document.getElementById('queryType').value;
      const queryDetails = document.getElementById('queryDetails').value;
      
      // Here you would normally send this to your backend for processing
      // For now, we'll simulate a response
      
      alert("Your question has been submitted! In a real implementation, this would communicate with your backend AI advisor system.");
    });
    
    // Make tables responsive
    function enhanceTablesForMobile() {
      const tables = document.querySelectorAll('table');
      tables.forEach(function(table) {
        // Get header text values
        const headerTexts = [];
        table.querySelectorAll('thead th').forEach(function(th) {
          headerTexts.push(th.textContent.trim());
        });
        
        // Add data-label attributes to table cells if they don't have them already
        if (headerTexts.length > 0) {
          table.querySelectorAll('tbody tr').forEach(function(row) {
            row.querySelectorAll('td').forEach(function(cell, index) {
              if (index < headerTexts.length && !cell.hasAttribute('data-label')) {
                cell.setAttribute('data-label', headerTexts[index]);
              }
            });
          });
        }
      });
    }
    
    // Call the function to enhance tables
    enhanceTablesForMobile();
    
    // Make inputs and buttons more touch-friendly on mobile
    function enhanceTouchTargets() {
      if (window.innerWidth < 768) {
        document.querySelectorAll('input, select, textarea, button, .btn').forEach(function(element) {
          if (element.offsetHeight < 44) { // Apple's recommended minimum
            element.style.minHeight = '44px';
          }
        });
      }
    }
    
    
    enhanceTouchTargets();
    window.addEventListener('resize', enhanceTouchTargets);
  </script>
  <script>
    const chatContainer = document.getElementById('chatContainer');
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendMessage');
  
    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.className = 'chat-message ' + sender;
      msg.style.marginBottom = '10px';
      msg.innerHTML = (sender === 'advisor' ? '👩‍🏫 ' : '🧑‍🎓 ') + text;
      chatContainer.appendChild(msg);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
  
    function getAdvisorResponse(question) {
      question = question.toLowerCase();
  
      if (question.includes('gpa')) {
        return `Your current CGPA is {{ student.CGPA }}. To reach your target CGPA of {{ target_cgpa }}, you need an average GPA of about {{ average_gpa_needed|floatformat:2 }} this semester.`;
      }
      if (question.includes('performance') || question.includes('grades')) {
        return `{% for enrollment in current_courses %}You need at least a <strong>{{ enrollment.min_grade }}</strong> in <strong>{{ enrollment.course_id }}</strong>{% if not forloop.last %}, {% endif %}{% endfor %} to reach your goal.`;
      }
      if (question.includes('study')) {
        return "Focus on active recall, practice problems, and spaced repetition. Use the Pomodoro technique to stay efficient!";
      }
      if (question.includes('time')) {
        return "Use a weekly planner. Set aside fixed hours daily for studying. Prioritize courses with lower grades.";
      }
      if (question.includes('help') || question.includes('resources')) {
        return "Try the academic success center, study groups, and faculty office hours for help.";
      }
      return "Sorry, I can only help with GPA, grades, study tips, and time management for now.";
    }
  
    sendButton.addEventListener('click', () => {
      const userText = chatInput.value.trim();
      if (!userText) return;
  
      appendMessage('student', userText);
      const reply = getAdvisorResponse(userText);
      appendMessage('advisor', reply);
      chatInput.value = '';
    });
  
    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') sendButton.click();
    });
  </script>
  
</body>
</html>